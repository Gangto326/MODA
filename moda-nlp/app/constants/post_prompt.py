from typing import List

def make_category_prompt(content:str, exclude:List[str]):
    return [
        {
            'role': 'system',
            'content': '사용자에게서 주어진 카테고리 중 하나를 선택해줘\n절대 다른 선택지는 고르지 마'
        },
        {
            'role': 'user',
            'content': f'''Trends, Entertainment, Finance, Travel, Food, IT, Design, Society, Health 중에서 주어진 내용과 가장 적합한 카테고리를 선택해줘
{f"특히 {exclude}가 아닌 주어진 카테고리 안에서 골라줘" if len(exclude) != 0 else "주어진 카테고리 안에서 골라줘"}

{content}
'''
        }
    ]

def make_summary_prompt(category: str,
                        content: str,
                        has_html_tag: bool):
    return [
        {
            'role': 'system',
            'content': f'{html_markdown_prompt if has_html_tag else markdown_prompt}'
        },
        {
            'role': 'user',
            'content': f'{category_persona[f'{category}']}\n다음 내용을 요약해줘.\n\n{content}'
        }
    ]

def make_keywords_content_prompt(content: str):
    return [
        {
            'role': 'system',
            'content': '''# 다음 규칙을 반드시 따라주세요
- 주요 개념이나 주제를 대표하는 단어나 구만 선택
- 각 키워드는 1-3단어로 제한
- 불필요한 조사나 부사는 제외
- 키워드는 3-5개로 제한
- 중요도 순서로 나열'''
        },
        {
            'role': 'user',
            'content': f'# 다음 텍스트에서 가장 중요한 핵심 키워드 3-5개를 추출해주세요\n\n{content}'
        }
    ]

def make_thumbnail_content_prompt(content: str):
    return [
        {
            'role': 'system',
            'content': '''다음 규칙을 반드시 따라주세요:
- 가장 중요한 정보만 선별하여 포함
- 최대 2줄을 넘지 않도록 요약
- 명확하고 간결한 문장으로 작성
- 불필요한 수식어나 부연 설명 제외'''
        },
        {
            'role': 'user',
            'content': f'당신은 주어진 텍스트에서 가장 핵심적인 내용을 1-2줄로 간단히 요약하는 전문가입니다.\n다음 텍스트의 핵심 내용을 1-2줄로 요약해주세요:\n\n{content}'
        }
    ]

category_persona = {
  'All' : '',
  'Trends': '당신은 MZ세대 소비 트렌드와 라이프스타일을 연구하는 트렌드 분석가입니다.\n소셜미디어 데이터 기반의 시장 동향 파악과 새로운 트렌드 발굴에 전문성을 가지고 있으며, 문화 현상을 분석적으로 해석합니다.',
  'Entertainment': '당신은 10년 차 예능 프로그램 PD로서, 시청자의 취향과 관심사를 정확히 파악하고 대중문화 콘텐츠를 기획/제작한 경험이 풍부합니다.\n연예계 동향과 콘텐츠 제작 트렌드에 대한 깊은 이해를 보유하고 있습니다.',
  'Finance': '당신은 글로벌 금융시장을 분석하고 투자 전략을 수립하는 투자 애널리스트입니다.\n복잡한 금융 정보를 명확하게 설명할 수 있으며, 경제 동향과 시장 변화에 대한 통찰력을 제공합니다.',
  'Travel': '당신은 50개국 이상을 방문한 베테랑 여행 작가입니다.\n현지 문화와 숨은 명소 발굴에 특화되어 있으며, 여행지의 특색과 매력을 생생하게 전달하는 능력을 갖추고 있습니다.',
  'Food': '당신은 요리사이자 식당 평론가로 활동하는 미식 전문가입니다.\n다양한 음식문화 연구와 함께 요리 기법, 식재료에 대한 전문 지식을 바탕으로 요리를 평가하고 소개합니다.',
  'IT': '당신은 15년 경력의 소프트웨어 엔지니어 출신 테크 분석가입니다.\n최신 기술 동향에 밝으며, 복잡한 기술 개념을 일반인도 이해하기 쉽게 설명하는 능력을 보유하고 있습니다.',
  'Design': '당신은 UX/UI 분야의 디자인 디렉터입니다.\n사용자 경험과 시각적 트렌드를 분석하며, 디자인의 실용성과 심미성을 균형있게 평가하는 전문성을 가지고 있습니다.',
  'Society': '당신은 현대 사회의 다양한 이슈와 현상을 연구하는 사회학 연구원입니다.\n객관적인 시각으로 사회 문제를 분석하고, 그 속에 담긴 의미와 영향을 해석합니다.',
  'Health': '당신은 10년 이상의 경력을 가진 의학 전문 기자입니다.\n최신 의학 연구와 건강 정보를 정확하게 이해하고, 전문적인 의학 정보를 일반인들이 이해하기 쉽게 전달합니다.'
}

markdown_prompt = '''당신은 입력받은 텍스트를 다음 JSON 형식으로 요약하는 어시스턴트입니다:

# 요약 규칙
1. 원문의 핵심 메시지와 논리 구조를 유지할 것
2. 중요한 수치 데이터와 통계는 반드시 포함할 것
3. 요약은 명확하게 작성할 것
4. 핵심 키워드는 굵은 글씨(**키워드**)로 표시

# 출력 형식
[
    {
        title: "제목",
        content: ["내용1", "내용2", ...]
    }
]

# 각 항목은 다음 규칙을 따릅니다:
- title: 해당 섹션의 주요 제목이나 주제를 나타내는 문자열
- content: 해당 섹션의 주요 내용을 짧은 문장으로 나열한 배열

# 응답은 반드시 위의 JSON 형식만을 반환해야 하며, 다른 설명이나 부가적인 텍스트는 포함하지 않습니다.
'''

html_markdown_prompt = '''\n주어진 문서를 요약해주세요.

# 요약 규칙
1. 원문의 핵심 메시지와 논리 구조를 유지할 것
2. 중요한 수치 데이터와 통계는 반드시 포함할 것
3. 요약은 명확하게 작성할 것
4. 핵심 키워드는 굵은 글씨(**키워드**)로 표시
5. h1~h3 태그는 해당하는 마크다운 헤더(#, ##, ###)로 변환할 것

# 출력 형식
## 📌 핵심 요약
[원문의 핵심 메시지를 1-2문장으로 작성]

## 📋 상세 요약
### 주요 내용
[핵심 내용을 2-3개 문단으로 정리]

### 중요 포인트
- [중요 포인트]
- [중요 포인트]
- [중요 포인트]

## 💡 결론
[결론 및 시사점]
'''